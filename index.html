<!DOCTYPE html>
<!-- 
    The 'lang' attribute helps screen readers and search engines know the language of the page.
-->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shape Tac Toe</title>

    <!-- 
        PyScript Core:
        These two lines load the PyScript library from the internet (CDN).
        This allows us to run Python code directly in the browser!
    -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <!-- Our Custom Styles -->
    <link rel="stylesheet" href="static/styles.css">
</head>

<body>
    <!-- 
        PyScript Configuration:
        The <script type="py"> tag is where the magic happens.
        
        src="./client_game.py": Tells PyScript to load and run this Python file.
        config="./pyscript.toml": Points to a configuration file that tells PyScript 
                                  which files in our folder should be available to the Python env.
        
        This script runs invisibly in the background.
    -->
    <script type="py" src="./client_game.py?v=1" config="./pyscript.toml?v=1"></script>

    <div class="main-wrapper">
        <!-- Header & Top Bar -->
        <header class="app-header">
            <div class="header-left">
                <h1>Shape Tac Toe</h1>
            </div>
            <div class="header-right">
                <button id="open-new-game-btn" class="icon-btn" title="Game Options">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#555555" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19.14 12.94c0.04-0.3 0.06-0.61 0.06-0.94c0-0.32-0.02-0.64-0.06-0.94l2.03-1.58c0.18-0.14 0.23-0.41 0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39 0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4 2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24 0-0.43 0.17-0.47 0.41L9.25 5.35C8.66 5.59 8.12 5.92 7.63 6.29L5.24 5.33c-0.22-0.08-0.47 0-0.59 0.22L2.74 8.87C2.62 9.08 2.66 9.34 2.86 9.49l2.03 1.58C4.84 11.36 4.8 11.69 4.8 12s0.02 0.64 0.06 0.94l-2.03 1.58c-0.18 0.14-0.23 0.41-0.12 0.61l1.92 3.32c0.12 0.22 0.37 0.29 0.59 0.22l2.39-0.96c0.5 0.38 1.03 0.7 1.62 0.94l0.36 2.54c0.05 0.24 0.24 0.41 0.48 0.41h3.84c0.24 0 0.44-0.17 0.47-0.41l0.36-2.54c0.59-0.24 1.13-0.56 1.62-0.94l2.39 0.96c0.22 0.08 0.47 0 0.59-0.22l1.92-3.32c0.12-0.22 0.07-0.49-0.12-0.61L19.14 12.94zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6S13.98 15.6 12 15.6z" />
                    </svg>
                </button>
            </div>
        </header>

        <!-- Game Info / Scoreboard -->
        <div class="scoreboard">
            <!-- Red Player -->
            <div class="player-card player-red" id="card-red">
                <div class="player-info">
                    <span class="player-name">Red</span>
                    <span class="pieces-count" id="pieces-red">-- left</span>
                </div>
                <div class="player-score">
                    <span class="score" id="score-red">0</span>
                    <span class="last-turn" id="last-turn-red">(+0)</span>
                </div>
            </div>

            <!-- Status / Turn Indicator -->
            <div class="game-status">
                <div id="status-display">Round 1 / 25</div>
            </div>

            <!-- Blue Player -->
            <div class="player-card player-blue" id="card-blue">
                <div class="player-info">
                    <span class="player-name">Blue</span>
                    <span class="pieces-count" id="pieces-blue">-- left</span>
                </div>
                <div class="player-score">
                    <span class="score" id="score-blue">0</span>
                    <span class="last-turn" id="last-turn-blue">(+0)</span>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <main class="game-area">
            <div id="game-board" class="board-container">
                <svg id="hex-grid" viewBox="0 0 600 600" preserveAspectRatio="xMidYMid meet"></svg>
            </div>
        </main>
    </div>

    <!-- 
        New Game Modal:
        A popup window that overlays the screen.
        It is hidden by default and shown via CSS/JS.
    -->
    <div class="modal-overlay" id="new-game-modal">
        <div class="modal-content">
            <h2>New Game Setup</h2>
            <div class="form-group">
                <label>Players</label>
                <select id="player-mode">
                    <option value="0">0 Players (AI vs AI)</option>
                    <option value="1" selected>1 Player (vs AI)</option>
                    <option value="2">2 Players (Hotseat)</option>
                </select>
            </div>

            <!-- Red AI Config (Hidden by default) -->
            <div class="form-group" id="ai-difficulty-red-group" style="display: none;">
                <label>Red AI Difficulty</label>
                <select id="ai-difficulty-red">
                    <option value="easy">Easy</option>
                    <option value="greedy" selected>Greedy</option>
                    <option value="thoughtful">Thoughtful</option>
                    <option value="smart">Smart</option>
                    <option value="genius">Genius</option>
                </select>
            </div>

            <!-- Blue AI Config (Default for 1 Player) -->
            <div class="form-group" id="ai-difficulty-blue-group">
                <label>AI Difficulty</label> <!-- Label changes dynamically -->
                <select id="ai-difficulty-blue">
                    <option value="easy">Easy</option>
                    <option value="greedy" selected>Greedy</option>
                    <option value="thoughtful">Thoughtful</option>
                    <option value="smart">Smart</option>
                    <option value="genius">Genius</option>
                </select>
            </div>
            <div class="form-group">
                <label>Game Length</label>
                <select id="game-length">
                    <option value="15">Short (15 Rounds)</option>
                    <option value="25" selected>Medium (25 Rounds)</option>
                    <option value="40">Long (40 Rounds)</option>
                </select>
            </div>
            <div class="modal-actions">
                <!-- 
                   Note: This button's click event is handled by Python (@when("click", "#start-game-btn"))!
                   We don't need to add a JS event listener for it.
                -->
                <button id="start-game-btn" style="margin-bottom: 10px;">Start New Game</button>
                <button id="cancel-game-btn" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Main JavaScript Logic -->
    <script src="static/script.js"></script>
</body>

</html>