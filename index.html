<!DOCTYPE html>
<!-- 
    The 'lang' attribute helps screen readers and search engines know the language of the page.
-->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shape Tac Toe</title>

    <!-- 
        PyScript Core:
        These two lines load the PyScript library from the internet (CDN).
        This allows us to run Python code directly in the browser!
    -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <!-- Our Custom Styles -->
    <link rel="stylesheet" href="static/styles.css">
</head>

<body>
    <!-- 
        PyScript Configuration:
        The <script type="py"> tag is where the magic happens.
        
        src="./client_game.py": Tells PyScript to load and run this Python file.
        config="./pyscript.toml": Points to a configuration file that tells PyScript 
                                  which files in our folder should be available to the Python env.
        
        This script runs invisibly in the background.
    -->
    <script type="py" src="./client_game.py?v=3" config="./pyscript.toml?v=3"></script>

    <div class="main-wrapper">
        <!-- Header & Top Bar -->
        <header class="app-header">
            <div class="header-left">
                <h1>Shape Tac Toe</h1>
            </div>
            <div class="header-right">
                <button id="open-new-game-btn" class="icon-btn" title="Game Options">
                    ⚙️ Options
                </button>
            </div>
        </header>

        <!-- Game Info / Scoreboard -->
        <div class="scoreboard">
            <!-- Red Player -->
            <div class="player-card player-red" id="card-red">
                <div class="player-info">
                    <span class="player-name">Red</span>
                    <span class="pieces-count" id="pieces-red">-- left</span>
                </div>
                <div class="player-score">
                    <span class="score" id="score-red">0</span>
                    <span class="last-turn" id="last-turn-red">(+0)</span>
                </div>
            </div>

            <!-- Status / Turn Indicator -->
            <div class="game-status">
                <div id="turn-indicator">Turn: Red</div>
                <div id="goal-info">Goal: <span id="goal-display">25</span> Rnds</div>
            </div>

            <!-- Blue Player -->
            <div class="player-card player-blue" id="card-blue">
                <div class="player-info">
                    <span class="player-name">Blue</span>
                    <span class="pieces-count" id="pieces-blue">-- left</span>
                </div>
                <div class="player-score">
                    <span class="score" id="score-blue">0</span>
                    <span class="last-turn" id="last-turn-blue">(+0)</span>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <main class="game-area">
            <div id="game-board" class="board-container">
                <svg id="hex-grid" viewBox="0 0 600 600" preserveAspectRatio="xMidYMid meet"></svg>
            </div>
            <div id="message-area"></div>
        </main>
    </div>

    <!-- 
        New Game Modal:
        A popup window that overlays the screen.
        It is hidden by default and shown via CSS/JS.
    -->
    <div class="modal-overlay" id="new-game-modal">
        <div class="modal-content">
            <h2>New Game Setup</h2>
            <div class="form-group">
                <label>Players</label>
                <select id="player-mode">
                    <option value="1">1 Player (vs AI)</option>
                    <option value="2">2 Players (Hotseat)</option>
                </select>
            </div>
            <div class="form-group" id="ai-difficulty-group">
                <label>AI Difficulty</label>
                <select id="ai-difficulty">
                    <option value="easy">Easy</option>
                    <option value="greedy" selected>Greedy</option>
                    <option value="thoughtful">Thoughtful</option>
                    <option value="smart">Smart</option>
                    <option value="genius">Genius</option>
                </select>
            </div>
            <div class="form-group">
                <label>Game Length</label>
                <select id="game-length">
                    <option value="15">Short (15 Rounds)</option>
                    <option value="25" selected>Medium (25 Rounds)</option>
                    <option value="40">Long (40 Rounds)</option>
                </select>
            </div>
            <div class="modal-actions">
                <!-- 
                   Note: This button's click event is handled by Python (@when("click", "#start-game-btn"))!
                   We don't need to add a JS event listener for it.
                -->
                <button id="start-game-btn">Start New Game</button>
            </div>
        </div>
    </div>

    <!-- Main JavaScript Logic -->
    <script src="static/script.js"></script>
</body>

</html>